{"version":3,"sources":["main.js"],"names":["canvas","document","querySelector","ctx","getContext","lineWidth","input_lineWidth","input_lineColor","choose_color_nav","brush_rect","brush_circle","display_rect","display_circle","body","getCanvas_x_y","e","arr","Array","clientX","offsetLeft","clientY","offsetTop","width","height","lineCap","lineJoin","strokeStyle","flag_painting","clearSelected","children","from","i","classList","contains","remove","addEventListener","t","target","className","includes","add","beginPath","parseInt","dataset","closePath","e1","x","y","moveTo","e2","value","lineTo","stroke","window","alert","outerHTML","substring","eraser_rect","event","clearRect","eraser_cir","globalCompositeOperation","arc","Math","PI","fill","inWipeMode_rect","inWipeMode_cir","onclick","style","display","left","top"],"mappings":";;;;;;;;;;;;AAAA,IAAIA,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAb;AACA,IAAIC,GAAG,GAAGH,MAAM,CAACI,UAAP,CAAkB,IAAlB,CAAV;AACA,IAAIC,SAAS,GAAGJ,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAhB;AACA,IAAII,eAAe,GAAGL,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAtB;AACA,IAAIK,eAAe,GAAGN,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAtB;AACA,IAAIM,gBAAgB,GAAGP,QAAQ,CAACC,aAAT,CAAuB,WAAvB,CAAvB;AACA,IAAIO,UAAU,GAAGR,QAAQ,CAACC,aAAT,CAAuB,QAAvB,EAAiCA,aAAjC,CAA+C,OAA/C,CAAjB;AACA,IAAIQ,YAAY,GAAGT,QAAQ,CAACC,aAAT,CAAuB,QAAvB,EAAiCA,aAAjC,CAA+C,SAA/C,CAAnB;AACA,IAAIS,YAAY,GAAGV,QAAQ,CAACC,aAAT,CAAuB,YAAvB,CAAnB;AACA,IAAIU,cAAc,GAAGX,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCA,aAAhC,CAA8C,SAA9C,CAArB;AACA,IAAIW,IAAI,GAAGZ,QAAQ,CAACY,IAApB,EAEA;;AACA,SAASC,aAAT,CAAuBC,CAAvB,EAA0B;AACxB,MAAIC,GAAG,GAAG,IAAIC,KAAJ,CAAU,CAAV,CAAV;AACAD,EAAAA,GAAG,CAAC,CAAD,CAAH,GAASD,CAAC,CAACG,OAAF,GAAYlB,MAAM,CAACmB,UAA5B;AACAH,EAAAA,GAAG,CAAC,CAAD,CAAH,GAASD,CAAC,CAACK,OAAF,GAAYpB,MAAM,CAACqB,SAA5B;AACA,SAAOL,GAAP;AACD,EAED;;;AACAhB,MAAM,CAACsB,KAAP,GAAe,IAAf;AACAtB,MAAM,CAACuB,MAAP,GAAgB,GAAhB,EAGA;;AACApB,GAAG,CAACqB,OAAJ,GAAc,OAAd;AACArB,GAAG,CAACE,SAAJ,GAAgB,CAAhB;AACAF,GAAG,CAACsB,QAAJ,GAAe,OAAf;AACAtB,GAAG,CAACuB,WAAJ,GAAkB,OAAlB,EAEA;;AACA,IAAIC,aAAa,GAAG,KAApB,EAA4B;AAG5B;;AACA,SAASC,aAAT,GAAyB;AACvB,MAAMC,QAAQ,GAAGZ,KAAK,CAACa,IAAN,CAAWzB,SAAS,CAACwB,QAArB,CAAjB;;AACA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1B,QAAIF,QAAQ,CAACE,CAAD,CAAR,CAAYC,SAAZ,CAAsBC,QAAtB,CAA+B,UAA/B,CAAJ,EAAgD;AAC9CJ,MAAAA,QAAQ,CAACE,CAAD,CAAR,CAAYC,SAAZ,CAAsBE,MAAtB,CAA6B,UAA7B;AACD;AACF;AACF,EAED;;;AACA7B,SAAS,CAAC8B,gBAAV,CAA2B,OAA3B,EAAoC,UAACpB,CAAD,EAAO;AACzC,MAAMqB,CAAC,GAAGrB,CAAC,CAACsB,MAAZ;;AACA,MAAID,CAAC,CAACE,SAAF,CAAYC,QAAZ,CAAqB,MAArB,CAAJ,EAAkC;AAChCX,IAAAA,aAAa;AACbQ,IAAAA,CAAC,CAACJ,SAAF,CAAYQ,GAAZ,CAAgB,UAAhB;AACD,GALwC,CAMzC;;;AACArC,EAAAA,GAAG,CAACsC,SAAJ;AACAtC,EAAAA,GAAG,CAACE,SAAJ,GAAgBqC,QAAQ,CAACN,CAAC,CAACO,OAAF,CAAUrB,KAAX,CAAxB;AACAnB,EAAAA,GAAG,CAACyC,SAAJ;AACD,CAVD,GAYA;;AACA5C,MAAM,CAACmC,gBAAP,CAAwB,WAAxB,EAAqC,UAACU,EAAD,EAAQ;AAC3ClB,EAAAA,aAAa,GAAG,IAAhB;;AAD2C,uBAE9Bb,aAAa,CAAC+B,EAAD,CAFiB;AAAA;AAAA,MAEtCC,CAFsC;AAAA,MAEnCC,CAFmC;;AAG3C5C,EAAAA,GAAG,CAAC6C,MAAJ,CAAWF,CAAX,EAAcC,CAAd;AACA/C,EAAAA,MAAM,CAACmC,gBAAP,CAAwB,WAAxB,EAAqC,UAACc,EAAD,EAAQ;AAC3C,QAAItB,aAAJ,EAAmB;AAAA,4BACJb,aAAa,CAACmC,EAAD,CADT;AAAA;AAAA,UACZH,EADY;AAAA,UACTC,EADS;;AAEjB5C,MAAAA,GAAG,CAACuB,WAAJ,GAAgBnB,eAAe,CAAC2C,KAAhC;AACA/C,MAAAA,GAAG,CAACgD,MAAJ,CAAWL,EAAX,EAAcC,EAAd;AACA5C,MAAAA,GAAG,CAACiD,MAAJ;AACD;AACF,GAPD;AAQApD,EAAAA,MAAM,CAACmC,gBAAP,CAAwB,SAAxB,EAAmC,YAAM;AACvCR,IAAAA,aAAa,GAAG,KAAhB;AACD,GAFD;AAGD,CAfD,GAiBA;;AACArB,eAAe,CAAC6B,gBAAhB,CAAiC,MAAjC,EAAyC,UAACpB,CAAD,EAAO;AAC9C,MAAMqB,CAAC,GAAGrB,CAAC,CAACsB,MAAZ;AACA,MAAMa,KAAK,GAACd,CAAC,CAACc,KAAd;;AACA,MAAIA,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAG,EAAzB,EAA6B;AAC3BG,IAAAA,MAAM,CAACC,KAAP,CAAa,wBAAb;AACAlB,IAAAA,CAAC,CAACc,KAAF,GAAU,CAAV;AACA;AACD;;AACDtB,EAAAA,aAAa;AACbzB,EAAAA,GAAG,CAACsC,SAAJ;AACAtC,EAAAA,GAAG,CAACE,SAAJ,GAAgB+B,CAAC,CAACc,KAAlB;AACA/C,EAAAA,GAAG,CAACyC,SAAJ;AACD,CAZD,GAcA;;AACArC,eAAe,CAAC4B,gBAAhB,CAAiC,MAAjC,EAAyC,UAACpB,CAAD,EAAO;AAC9C,MAAMqB,CAAC,GAAGrB,CAAC,CAACsB,MAAZ;AACAlC,EAAAA,GAAG,CAACsC,SAAJ;AACAtC,EAAAA,GAAG,CAACuB,WAAJ,GAAkBU,CAAC,CAACc,KAApB;AACA/C,EAAAA,GAAG,CAACyC,SAAJ;AACD,CALD,GAOA;;AACApC,gBAAgB,CAAC2B,gBAAjB,CAAkC,OAAlC,EAA2C,UAACpB,CAAD,EAAO;AAChD,MAAMqB,CAAC,GAAGrB,CAAC,CAACsB,MAAZ;AACA9B,EAAAA,eAAe,CAAC2C,KAAhB,GAAwBd,CAAC,CAACmB,SAAF,CAAYC,SAAZ,CAAsB,EAAtB,EAA0B,EAA1B,CAAxB;AACArD,EAAAA,GAAG,CAACsC,SAAJ;AACAtC,EAAAA,GAAG,CAACuB,WAAJ,GAAkBnB,eAAe,CAAC2C,KAAlC;AACA/C,EAAAA,GAAG,CAACyC,SAAJ;AACD,CAND,GAQA;;AACA,SAASa,WAAT,CAAqBC,KAArB,EAA4B;AAAA,wBACb5C,aAAa,CAAC4C,KAAD,CADA;AAAA;AAAA,MACrBZ,CADqB;AAAA,MAClBC,CADkB;;AAE1B5C,EAAAA,GAAG,CAACsC,SAAJ;AACAtC,EAAAA,GAAG,CAACE,SAAJ,GAAc,CAAd;AACAF,EAAAA,GAAG,CAACwD,SAAJ,CAAcb,CAAd,EAAiBC,CAAjB,EAAoB,EAApB,EAAwB,EAAxB;AACA5C,EAAAA,GAAG,CAACyC,SAAJ;AACD;;AAED,SAASgB,UAAT,CAAoBF,KAApB,EAA2B;AAAA,wBACZ5C,aAAa,CAAC4C,KAAD,CADD;AAAA;AAAA,MACpBZ,CADoB;AAAA,MACjBC,CADiB;;AAEzB5C,EAAAA,GAAG,CAAC0D,wBAAJ,GAA6B,iBAA7B;AACA1D,EAAAA,GAAG,CAACsC,SAAJ;AACAtC,EAAAA,GAAG,CAACE,SAAJ,GAAc,CAAd;AACAF,EAAAA,GAAG,CAAC2D,GAAJ,CAAQhB,CAAR,EAAWC,CAAX,EAAc,EAAd,EAAkB,CAAlB,EAAqB,IAAIgB,IAAI,CAACC,EAA9B;AACA7D,EAAAA,GAAG,CAACuB,WAAJ,GAAkB,MAAlB;AACAvB,EAAAA,GAAG,CAAC8D,IAAJ;AACA9D,EAAAA,GAAG,CAAC0D,wBAAJ,GAA6B,aAA7B;AACA1D,EAAAA,GAAG,CAACyC,SAAJ;AACD;;AAED,IAAIsB,eAAe,GAAG,KAAtB;AAAA,IAA6BC,cAAc,GAAG,KAA9C;;AACA1D,UAAU,CAAC2D,OAAX,GAAqB,YAAM;AACzBF,EAAAA,eAAe,GAAG,IAAlB;AACAC,EAAAA,cAAc,GAAG,KAAjB;AACAxC,EAAAA,aAAa,GAAC,KAAd;AACAhB,EAAAA,YAAY,CAAC0D,KAAb,CAAmBC,OAAnB,GAA6B,OAA7B;AACA1D,EAAAA,cAAc,CAACyD,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AACD,CAND;;AAQA5D,YAAY,CAAC0D,OAAb,GAAuB,YAAM;AAC3BD,EAAAA,cAAc,GAAG,IAAjB;AACAD,EAAAA,eAAe,GAAG,KAAlB;AACAtD,EAAAA,cAAc,CAACyD,KAAf,CAAqBC,OAArB,GAA+B,OAA/B;AACA3D,EAAAA,YAAY,CAAC0D,KAAb,CAAmBC,OAAnB,GAA6B,MAA7B;AACD,CALD;;AAOAjE,SAAS,CAAC+D,OAAV,GAAoB,YAAM;AACxBD,EAAAA,cAAc,GAAG,KAAjB;AACAD,EAAAA,eAAe,GAAG,KAAlB;AACAvD,EAAAA,YAAY,CAAC0D,KAAb,CAAmBC,OAAnB,GAA6B,MAA7B;AACA1D,EAAAA,cAAc,CAACyD,KAAf,CAAqBC,OAArB,GAA+B,MAA/B;AACD,CALD;;AAOA7D,UAAU,CAAC0B,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACzCnC,EAAAA,MAAM,CAACmC,gBAAP,CAAwB,WAAxB,EAAqC,UAACpB,CAAD,EAAO;AAC1CJ,IAAAA,YAAY,CAAC0D,KAAb,CAAmBE,IAAnB,GAA0BxD,CAAC,CAACG,OAAF,GAAY,IAAtC;AACAP,IAAAA,YAAY,CAAC0D,KAAb,CAAmBG,GAAnB,GAAyBzD,CAAC,CAACK,OAAF,GAAY,IAArC;;AACA,QAAI8C,eAAJ,EAAqB;AACnBT,MAAAA,WAAW,CAAC1C,CAAD,CAAX;AACD;AACF,GAND;AAOD,CARD;AAUAL,YAAY,CAACyB,gBAAb,CAA8B,OAA9B,EAAuC,YAAM;AAC3CnC,EAAAA,MAAM,CAACmC,gBAAP,CAAwB,WAAxB,EAAqC,UAACpB,CAAD,EAAO;AAC1CH,IAAAA,cAAc,CAACyD,KAAf,CAAqBE,IAArB,GAA4BxD,CAAC,CAACG,OAAF,GAAY,IAAxC;AACAN,IAAAA,cAAc,CAACyD,KAAf,CAAqBG,GAArB,GAA2BzD,CAAC,CAACK,OAAF,GAAY,IAAvC;;AACA,QAAI+C,cAAJ,EAAoB;AAClBP,MAAAA,UAAU,CAAC7C,CAAD,CAAV;AACD;AACF,GAND;AAOD,CARD","file":"main.1f19ae8e.js","sourceRoot":"..","sourcesContent":["let canvas = document.querySelector(\".myCanvas\");\r\nlet ctx = canvas.getContext(\"2d\");\r\nlet lineWidth = document.querySelector(\".lineWidth\");\r\nlet input_lineWidth = document.querySelector(\"#width\");\r\nlet input_lineColor = document.querySelector(\"#color\");\r\nlet choose_color_nav = document.querySelector(\".colorNav\");\r\nlet brush_rect = document.querySelector(\".brush\").querySelector(\".rect\");\r\nlet brush_circle = document.querySelector(\".brush\").querySelector(\".circle\");\r\nlet display_rect = document.querySelector(\".rectangle\");\r\nlet display_circle = document.querySelector(\".main\").querySelector(\".circle\");\r\nlet body = document.body;\r\n\r\n//正确获取鼠标在画板canvas的位置\r\nfunction getCanvas_x_y(e) {\r\n  let arr = new Array(2);\r\n  arr[0] = e.clientX - canvas.offsetLeft;\r\n  arr[1] = e.clientY - canvas.offsetTop;\r\n  return arr;\r\n}\r\n\r\n//设置canvas画板的宽高，没有单位；\r\ncanvas.width = 1152;\r\ncanvas.height = 518;\r\n\r\n\r\n//设置线条样式\r\nctx.lineCap = \"round\";\r\nctx.lineWidth = 1;\r\nctx.lineJoin = \"round\";\r\nctx.strokeStyle = \"black\";\r\n\r\n//画画模式\r\nlet flag_painting = false;  //设置变量表示是否在画画中\r\n\r\n\r\n//清除线条粗细组类名的函数\r\nfunction clearSelected() {\r\n  const children = Array.from(lineWidth.children);\r\n  for (let i = 0; i < 4; i++) {\r\n    if (children[i].classList.contains(\"selected\")) {\r\n      children[i].classList.remove(\"selected\");\r\n    }\r\n  }\r\n}\r\n\r\n//监听线条粗细变化事件\r\nlineWidth.addEventListener(\"click\", (e) => {\r\n  const t = e.target;\r\n  if (t.className.includes(\"line\")) {\r\n    clearSelected();\r\n    t.classList.add(\"selected\");\r\n  }\r\n  //必须在每次选择线条粗细后重新beginPath,不然线条全部都会变成一个粗细\r\n  ctx.beginPath();\r\n  ctx.lineWidth = parseInt(t.dataset.width);\r\n  ctx.closePath();\r\n});\r\n\r\n// 画画模式\r\ncanvas.addEventListener(\"mousedown\", (e1) => {\r\n  flag_painting = true;\r\n  let [x, y] = getCanvas_x_y(e1);\r\n  ctx.moveTo(x, y);\r\n  canvas.addEventListener(\"mousemove\", (e2) => {\r\n    if (flag_painting) {\r\n      let [x, y] = getCanvas_x_y(e2);\r\n      ctx.strokeStyle=input_lineColor.value;\r\n      ctx.lineTo(x, y);\r\n      ctx.stroke();\r\n    }\r\n  });\r\n  canvas.addEventListener(\"mouseup\", () => {\r\n    flag_painting = false;\r\n  });\r\n});\r\n\r\n//监听表单线条粗细输入事件\r\ninput_lineWidth.addEventListener(\"blur\", (e) => {\r\n  const t = e.target;\r\n  const value=t.value;\r\n  if (value < 0 || value > 50) {\r\n    window.alert(\"为了绘画体验，线条粗细范围：1-50(px)\");\r\n    t.value = 1;\r\n    return;\r\n  }\r\n  clearSelected();\r\n  ctx.beginPath();\r\n  ctx.lineWidth = t.value;\r\n  ctx.closePath();\r\n});\r\n\r\n//监听表单的颜色输入事件\r\ninput_lineColor.addEventListener(\"blur\", (e) => {\r\n  const t = e.target;\r\n  ctx.beginPath();\r\n  ctx.strokeStyle = t.value;\r\n  ctx.closePath();\r\n});\r\n\r\n//监听直接选择颜色的事件\r\nchoose_color_nav.addEventListener(\"click\", (e) => {\r\n  const t = e.target;\r\n  input_lineColor.value = t.outerHTML.substring(30, 37);\r\n  ctx.beginPath();\r\n  ctx.strokeStyle = input_lineColor.value;\r\n  ctx.closePath();\r\n});\r\n\r\n//橡皮擦功能\r\nfunction eraser_rect(event) {\r\n  let [x, y] = getCanvas_x_y(event);\r\n  ctx.beginPath();\r\n  ctx.lineWidth=1;\r\n  ctx.clearRect(x, y, 20, 20);\r\n  ctx.closePath();\r\n}\r\n\r\nfunction eraser_cir(event) {\r\n  let [x, y] = getCanvas_x_y(event);\r\n  ctx.globalCompositeOperation='destination-out';\r\n  ctx.beginPath();\r\n  ctx.lineWidth=1;\r\n  ctx.arc(x, y, 10, 0, 2 * Math.PI);\r\n  ctx.strokeStyle = \"#fff\";\r\n  ctx.fill();\r\n  ctx.globalCompositeOperation='source-over';\r\n  ctx.closePath();\r\n}\r\n\r\nlet inWipeMode_rect = false, inWipeMode_cir = false;\r\nbrush_rect.onclick = () => {\r\n  inWipeMode_rect = true;\r\n  inWipeMode_cir = false;\r\n  flag_painting=false;\r\n  display_rect.style.display = \"block\";\r\n  display_circle.style.display = \"none\";\r\n};\r\n\r\nbrush_circle.onclick = () => {\r\n  inWipeMode_cir = true;\r\n  inWipeMode_rect = false;\r\n  display_circle.style.display = \"block\";\r\n  display_rect.style.display = \"none\";\r\n};\r\n\r\nlineWidth.onclick = () => {\r\n  inWipeMode_cir = false;\r\n  inWipeMode_rect = false;\r\n  display_rect.style.display = \"none\";\r\n  display_circle.style.display = \"none\";\r\n};\r\n\r\nbrush_rect.addEventListener(\"click\", () => {\r\n  canvas.addEventListener(\"mousemove\", (e) => {\r\n    display_rect.style.left = e.clientX + \"px\";\r\n    display_rect.style.top = e.clientY + \"px\";\r\n    if (inWipeMode_rect) {\r\n      eraser_rect(e);\r\n    }\r\n  });\r\n});\r\n\r\nbrush_circle.addEventListener(\"click\", () => {\r\n  canvas.addEventListener(\"mousemove\", (e) => {\r\n    display_circle.style.left = e.clientX + \"px\";\r\n    display_circle.style.top = e.clientY + \"px\";\r\n    if (inWipeMode_cir) {\r\n      eraser_cir(e);\r\n    }\r\n  });\r\n});\r\n\r\n\r\n\r\n"]}